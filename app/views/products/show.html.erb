<% content_for :title, @product.name %>
<div class="product-detail-page">
  <!-- Breadcrumb Section -->
  <div class="breadcrumb-section">
    <div class="container">
      <div class="breadcrumb-content">
        <h2 class="page-title">Product Details</h2>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb-list">
            <li><%= link_to "Home", root_path %></li>
            <li><%= link_to "Pages", products_path %></li>
            <li class="active">Product Details</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <!-- Product Content -->
  <div class="container">
    <div class="product-content">
      <div class="row">
        <!-- Product Images -->
        <div class="col-lg-6">
          <div class="product-images-wrapper">
            <div class="main-image-container">
              <% if @product.image_url.present? %>
                <%= image_tag @product.image_url, class: "main-product-image", alt: @product.name, id: "mainProductImage" %>
              <% elsif @product.images.attached? %>
                <%= image_tag @product.main_image.variant(resize_to_limit: [600, 600]),
                              class: "main-product-image", alt: @product.name, id: "mainProductImage" %>
              <% else %>
                <div class="no-image-placeholder">
                  <i class="fa fa-image"></i>
                  <p>No image available</p>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <!-- Product Details -->
        <div class="col-lg-6">
          <div class="product-info">
            <h1 class="product-name"><%= @product.name %></h1>
            <!-- Price -->
            <div class="price-wrapper">
              <% if @product.on_sale? %>
                <span class="current-price">$<%= @product.sale_price %></span>
                <span class="original-price">$<%= @product.base_price %></span>
              <% else %>
                <span class="current-price">$<%= @product.base_price %></span>
              <% end %>
            </div>
            <!-- Rating -->
            <div class="rating-section">
              <div class="stars">
                <% 5.times do |i| %>
                  <i class="fa fa-star <%= i < 4 ? 'filled' : '' %>"></i>
                <% end %>
              </div>
              <span class="rating-text">(4.0)</span>
            </div>
            <!-- Color Selection -->
            <div class="product-options">
              <div class="option-group">
                <label class="option-label">Color</label>
                <div class="color-options">
                  <div class="color-option active" data-color="black" style="background-color: #000000;"></div>
                  <div class="color-option" data-color="brown" style="background-color: #8B4513;"></div>
                  <div class="color-option" data-color="gray" style="background-color: #808080;"></div>
                </div>
              </div>
              <!-- Size Selection -->
              <div class="option-group">
                <label class="option-label">Size</label>
                <div class="size-options">
                  <button class="size-option" data-size="S">S</button>
                  <button class="size-option active" data-size="M">M</button>
                  <button class="size-option" data-size="L">L</button>
                  <button class="size-option" data-size="XL">XL</button>
                </div>
              </div>
            </div>
            <!-- Quantity and Add to Cart -->
            <div class="purchase-section">
              <div class="quantity-wrapper">
                <label class="option-label">Qty</label>
                <div class="quantity-controls">
                  <button class="qty-btn minus">-</button>
                  <input type="number" class="qty-input" value="1" min="1">
                  <button class="qty-btn plus">+</button>
                </div>
              </div>
              <button class="add-to-cart-btn">
                <i class="fa fa-shopping-cart"></i>
                Add To Cart
              </button>
            </div>
            <!-- Stock Status -->
            <div class="stock-status">
              <% if @product.in_stock? %>
                <span class="in-stock">
                  <i class="fa fa-check-circle"></i>
                  In Stock (<%= @product.stock_quantity %> available)
                </span>
              <% else %>
                <span class="out-of-stock">
                  <i class="fa fa-times-circle"></i>
                  Out of Stock
                </span>
              <% end %>
            </div>
            <!-- Brand -->
            <% if @product.brand.present? %>
              <div class="brand-info">
                <span class="label">Brand:</span>
                <span class="value"><%= @product.brand.name %></span>
              </div>
            <% end %>
            <!-- Categories -->
            <% if @product.categories.any? %>
              <div class="category-info">
                <span class="label">Category:</span>
                <span class="value">
                  <% @product.categories.each do |category| %>
                    <%= link_to category.name, products_path(category_id: category.id) %>
                  <% end %>
                </span>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Product Tabs Section -->
  <div class="container">
    <div class="product-tabs-section">
      <div class="tabs-navigation">
        <a href="#description" class="tab-btn active" data-tab="description">Description</a>
        <a href="#additional" class="tab-btn" data-tab="additional">Additional Info</a>
        <a href="#reviews" class="tab-btn" data-tab="reviews">Reviews</a>
        <a href="#video" class="tab-btn" data-tab="video">Video</a>
      </div>
      <div class="tabs-content">
        <!-- Description Tab -->
        <div class="tab-pane active" id="description">
          <div class="description-content">
            <h4>Vivamus tempor</h4>
            <% if @product.description.present? %>
              <%= simple_format(@product.description) %>
            <% else %>
              <p>Vivamus tempor lorem ac cursus tempor. Duis vitae varius lorem, ut eleifend ex. Donec aliquam vulputate magna quis rhoncus. Sed dapibus vitae lectus eu laoreet. Praesent sed mattis massa. Ut in elementum lorem. Vestibulum consectetur, libero at sagittis facilisis, arcu felis lacinia elit, ut malesuada dui ipsum eu nisl. Vestibulum vel libero tempus, mattis arcu eu, ultrices velit.</p>
            <% end %>
            <h4>More details</h4>
            <ul class="product-features">
              <li>Premium quality materials used throughout.</li>
              <li>Designed for comfort and style.</li>
              <li>Available in multiple colors and sizes.</li>
              <li>Easy care instructions included.</li>
              <li>Satisfaction guaranteed or your money back.</li>
            </ul>
          </div>
        </div>
        <!-- Additional Info Tab -->
        <div class="tab-pane" id="additional">
          <div class="additional-info">
            <table class="info-table">
              <tr>
                <td>Weight</td>
                <td>1.2 kg</td>
              </tr>
              <tr>
                <td>Dimensions</td>
                <td>30 × 20 × 15 cm</td>
              </tr>
              <tr>
                <td>Material</td>
                <td>Premium Leather</td>
              </tr>
              <tr>
                <td>Care Instructions</td>
                <td>Wipe clean with damp cloth</td>
              </tr>
            </table>
          </div>
        </div>
        <!-- Reviews Tab -->
        <div class="tab-pane" id="reviews">
          <div class="reviews-content">
            <div class="reviews-summary">
              <div class="rating-overview">
                <div class="average-rating">
                  <span class="rating-number">4.0</span>
                  <div class="stars">
                    <% 5.times do |i| %>
                      <i class="fa fa-star <%= i < 4 ? 'filled' : '' %>"></i>
                    <% end %>
                  </div>
                  <span class="review-count">Based on 24 reviews</span>
                </div>
              </div>
            </div>
            <div class="reviews-list">
              <div class="review-item">
                <div class="reviewer-info">
                  <strong>John Doe</strong>
                  <div class="review-rating">
                    <% 5.times do |i| %>
                      <i class="fa fa-star <%= i < 5 ? 'filled' : '' %>"></i>
                    <% end %>
                  </div>
                </div>
                <p class="review-text">Excellent product! Great quality and fast shipping. Highly recommended.</p>
                <span class="review-date">2 days ago</span>
              </div>
              <div class="review-item">
                <div class="reviewer-info">
                  <strong>Jane Smith</strong>
                  <div class="review-rating">
                    <% 5.times do |i| %>
                      <i class="fa fa-star <%= i < 4 ? 'filled' : '' %>"></i>
                    <% end %>
                  </div>
                </div>
                <p class="review-text">Good value for money. The product matches the description perfectly.</p>
                <span class="review-date">1 week ago</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Video Tab -->
        <div class="tab-pane" id="video">
          <div class="video-content">
            <div class="video-placeholder">
              <i class="fa fa-play-circle"></i>
              <p>Product demonstration video coming soon...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Related Products -->
  <% if @related_products.any? %>
    <div class="container">
      <div class="related-products-section">
        <h3 class="section-title">Related Products</h3>
        <div class="products-grid">
          <% @related_products.each do |product| %>
            <div class="product-card">
              <div class="product-image">
                <% if product.images.attached? %>
                  <%= image_tag product.main_image.variant(resize_to_limit: [300, 300]), alt: product.name %>
                <% elsif product.image_url.present? %>
                  <%= image_tag product.image_url, alt: product.name %>
                <% else %>
                  <div class="no-image">
                    <i class="fa fa-image"></i>
                  </div>
                <% end %>
                <div class="product-overlay">
                  <%= link_to "View Details", product_path(product), class: "view-btn" %>
                </div>
              </div>
              <div class="product-details">
                <h4 class="product-title"><%= link_to product.name, product_path(product) %></h4>
                <div class="product-rating">
                  <% 5.times do |i| %>
                    <i class="fa fa-star <%= i < 4 ? 'filled' : '' %>"></i>
                  <% end %>
                </div>
                <div class="product-price">
                  <% if product.on_sale? %>
                    <span class="sale-price">$<%= product.sale_price %></span>
                    <span class="original-price">$<%= product.base_price %></span>
                  <% else %>
                    <span class="current-price">$<%= product.base_price %></span>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
